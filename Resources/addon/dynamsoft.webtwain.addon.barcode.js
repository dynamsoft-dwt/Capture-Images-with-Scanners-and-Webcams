/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2016, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 12.1
*
* Module: addon/barcode
* final js: build\addon\dynamsoft.webtwain.addon.barcode.js
*/
;Dynamsoft.BarcodeVersion="4.3.0.930";Dynamsoft.BarcodeMacVersion="2016,3,25,10,23";var EnumDWT_BarcodeFormat={All:183806,OneD:180702,CODABAR:2,CODE_39:4,CODE_93:8,CODE_128:16,EAN_8:64,EAN_13:128,ITF:256,UPC_A:16384,UPC_E:32768,INDUSTRIAL_25:131072,QR_CODE:2048,PDF417:1024,DATAMATRIX:32};(function(a){function b(){var c=this;c._errorCode=0;c._errorString="";c._Count=0;c._resultlist=[]}b.prototype.GetErrorCode=function(){var c=this;return c._errorCode};b.prototype.GetErrorString=function(){var c=this;return c._errorString};b.prototype.GetCount=function(){var c=this;return c._Count};b.prototype.GetContent=function(d){var e=this,c=e._resultlist.length;if(e._errorCode<0){return""}if(d>=c||d<0){Dynamsoft.Lib.Errors.BarCode_InvalidIndex(e,"GetContent");return""}return e._resultlist[d].content};b.prototype.GetFormat=function(d){var e=this,c=e._resultlist.length;if(e._errorCode<0){return""}if(d>=c||d<0){Dynamsoft.Lib.Errors.BarCode_InvalidIndex(e,"GetFormat");return""}return e._resultlist[d].format};b.prototype.GetContentType=function(d){var e=this,c=e._resultlist.length;if(e._errorCode<0){return""}if(d>=c||d<0){Dynamsoft.Lib.Errors.BarCode_InvalidIndex(e,"GetContentType");return""}return e._resultlist[d].contentType};b.prototype.GetX1=function(d){var e=this,c=e._resultlist.length;if(e._errorCode<0){return""}if(d>=c||d<0){Dynamsoft.Lib.Errors.BarCode_InvalidIndex(e,"GetX1");return""}return e._resultlist[d].point[0]};b.prototype.GetX2=function(d){var e=this,c=e._resultlist.length;if(e._errorCode<0){return""}if(d>=c||d<0){Dynamsoft.Lib.Errors.BarCode_InvalidIndex(e,"GetX2");return""}return e._resultlist[d].point[2]};b.prototype.GetX3=function(d){var e=this,c=e._resultlist.length;if(e._errorCode<0){return""}if(d>=c||d<0){Dynamsoft.Lib.Errors.BarCode_InvalidIndex(e,"GetX3");return""}return e._resultlist[d].point[4]};b.prototype.GetX4=function(d){var e=this,c=e._resultlist.length;if(e._errorCode<0){return""}if(d>=c||d<0){Dynamsoft.Lib.Errors.BarCode_InvalidIndex(e,"GetX4");return""}return e._resultlist[d].point[6]};b.prototype.GetY1=function(d){var e=this,c=e._resultlist.length;if(e._errorCode<0){return""}if(d>=c||d<0){Dynamsoft.Lib.Errors.BarCode_InvalidIndex(e,"GetY1");return""}return e._resultlist[d].point[1]};b.prototype.GetY2=function(d){var e=this,c=e._resultlist.length;if(e._errorCode<0){return""}if(d>=c||d<0){Dynamsoft.Lib.Errors.BarCode_InvalidIndex(e,"GetY2");return""}return e._resultlist[d].point[3]};b.prototype.GetY3=function(d){var e=this,c=e._resultlist.length;if(e._errorCode<0){return""}if(d>=c||d<0){Dynamsoft.Lib.Errors.BarCode_InvalidIndex(e,"GetY3");return""}return e._resultlist[d].point[5]};b.prototype.GetY4=function(d){var e=this,c=e._resultlist.length;if(e._errorCode<0){return""}if(d>=c||d<0){Dynamsoft.Lib.Errors.BarCode_InvalidIndex(e,"GetY4");return""}return e._resultlist[d].point[7]};a.NewBarcodeResult=function(){return new b()}})(Dynamsoft.Lib);(function(b){if(!b.product.bChromeEdition){return}var e=b.html5.Funs;function d(f){f.__innerBarcodeReadFunction=function(g,j,k,l,h){var n=this;if(!b.isFunction(l)){return n.__innerBarcodeSyncReadFunction(g,k)}else{return n.__innerBarcodeAsyncReadFunction(g,j,k,l,h)}};f.__innerBarcodeAsyncReadFunction=function(g,k,n,o,j){var q=this;var h=function(m){if(m.exception==0){if(b.isFunction(o)){o(k,q.__innerGetBarcodeResultAsyncFunction(m))}}else{if(b.isFunction(j)){j(m.exception,m.description)}}e.hideMask(g)},l=function(m){e.hideMask(g)};e.showMask(g);q._innerSend(g,n,true,h,l);return true};f.__innerBarcodeSyncReadFunction=function(h,k){var l=this,j,g;j=l._innerFunRaw(h,k,false,false);g=b.NewBarcodeResult();g._errorCode=l._errorCode;g._errorString=l._errorString;if(j&&b.isArray(j)){g._resultlist=j;g._Count=j.length}return g}}function c(k,l,g){var h=[];if(g||l==EnumDWT_BarcodeFormat.All){h.push({QR:true});h.push({PDF417:true});h.push({DataMatrix:true});h.push({barcode1D:true})}else{if(l==EnumDWT_BarcodeFormat.QR_CODE){h.push({QR:true})}else{if(l==EnumDWT_BarcodeFormat.PDF417){h.push({PDF417:true})}else{if(l==EnumDWT_BarcodeFormat.DATAMATRIX){h.push({DataMatrix:true})}else{h.push({barcode1D:true})}}}}if(g){var j=e.promptLicenseErr;e.promptLicenseErr=function(){};for(i=0;i<h.length;i++){if(e.checkProductKey(k,h[i],true)){e.promptLicenseErr=j;return true}}e.promptLicenseErr=j;Dynamsoft.Lib.Errors.BarcodeLicenseEmpty(k);e.promptLicenseErr(k);return false}else{for(i=0;i<h.length;i++){if(!e.checkProductKey(k,h[i],true)){return false}}return true}}var a=function(g){var f;d(g);f={Barcode:{Read:function(k,l,h,j){if(!c(g,l,false)){if(b.isFunction(j)){j(g._errorCode,g._errorString)}return false}return g.__innerBarcodeReadFunction("ReadBarcode",k,e.makeParams(k,0,0,0,0,l),h,j)},ReadRect:function(m,p,o,l,j,n,h,k){if(!c(g,n,false)){if(b.isFunction(k)){k(g._errorCode,g._errorString)}return false}return g.__innerBarcodeReadFunction("ReadBarcode",m,e.makeParams(m,p,o,l,j,n),h,k)},GetLocalVersion:function(){return g._innerFun("BarcodeVersion")},Download:function(n,q,j){var m=g,o;b.cancelFrome=2;var l=function(){if(b.isFunction(q)){q()}return true},r=function(){if(b.isFunction(j)){j(m.ErrorCode,m.ErrorString)}return false};if(!e.checkProductKey(m,{Core:true})){return r()}if(!c(m,-1,true)){return r()}var h=g._innerFun("BarcodeVersion");if(b.env.bMac&&h==Dynamsoft.BarcodeMacVersion){l();return true}else{if(h==Dynamsoft.BarcodeVersion){l();return true}}if(!n||n==""){b.Errors.BarCode_InvalidRemoteFilename(m);r();return false}if(e.isServerInvalid(m)){r();return false}o="get";b.showProgress(m,"Download",true);var p=function(s){var t=(s.total===0)?100:Math.round(s.loaded*100/s.total),u=[s.loaded," / ",s.total].join("");m._OnPercentDone([0,t,"","http"])},k=true;m._OnPercentDone([0,-1,"Downloading Barcode Module...","http"]);if(!b.isFunction(q)){k=false}return e.loadHttpBlob(m,o,n,k,function(s){m._OnPercentDone([0,-1,"Loading..."]);var u=100;m.__LoadImageFromBytes(s,u,"",k,l,r)},function(){b.closeProgress("Download");r()},p)}}};g.__addon=g.__addon||{};b.mix(g.__addon,f)};b.DynamicLoadAddonFuns.push(a)})(Dynamsoft.Lib);(function(b){if(!b.product.bPluginEdition&&!b.product.bActiveXEdition){return}var a=function(e){var d=false,f,c;if(e.getSWebTwain()&&e.getSWebTwain().Addon){d=true}if(!d){return false}f=e.getSWebTwain().Addon.Barcode;c={Barcode:{Read:function(j,k,g,h){if(b.isFunction(g)){f.ReadAsync(j,k,function(m,l){if(l.GetErrorCode()!=0){h(l.GetErrorCode(),l.GetErrorString())}else{g(m,l)}});return null}else{return f.Read(j,k)}},ReadRect:function(l,o,n,k,h,m,g,j){if(b.isFunction(g)){f.ReadRectAsync(l,o,n,k,h,m,function(q,p){if(p.GetErrorCode()!=0){j(p.GetErrorCode(),p.GetErrorString())}else{g(q,p)}});return null}else{return f.ReadRect(l,o,n,k,h,m)}},GetLocalVersion:function(){return f.GetLocalVersion()},Download:function(l,g,j){var k=f.GetLocalVersion();if(k==Dynamsoft.BarcodeVersion){if(Dynamsoft.Lib.isFunction(g)){g()}return true}var h=f.Download(l);return b.wrapperRet(e,h,g,j)}}};e.Addon=e.Addon||{};b.mix(e.Addon,c)};b.DynamicLoadAddonFuns.push(a)})(Dynamsoft.Lib);
